{
  "qualifiedName": "@apetta/diagrams-mcp",
  "displayName": "Diagrams",
  "description": "A local/remote MCP server for generating infrastructure and architecture diagrams as code using the Python [diagrams](https://diagrams.mingrammer.com/) library\n\n## Features\n\n**5 Diagram Tools** for infrastructure, architecture, and flowcharts:\n\n- **Infrastructure Diagrams** - 15+ providers (AWS, Azure, GCP, K8s, On-Prem, SaaS)\n- **500+ Node Types** - Compute, database, network, storage, security\n- **Custom Icons** - Web URLs (HTTPS) and local files\n- **Flowcharts** - 24 shapes for process diagrams\n- **Validation** - Dry-run before generation\n\n**Advanced Capabilities:**\n\n- Multiple output formats (PNG, PDF, JPG, DOT)\n- Cluster grouping with unlimited nesting\n- Edge styling (colours, labels, line styles)\n- Graphviz attribute customisation\n\n## Installation\n\n**System Requirements:**\n\n- Graphviz must be installed:\n  - macOS: `brew install graphviz`\n  - Ubuntu/Debian: `sudo apt-get install graphviz`\n  - Windows: Download from https://graphviz.org/download/\n\n### IDEs\n\n[![Install in VS Code](https://img.shields.io/badge/VS_Code-Install_diagrams-0098FF?style=flat-square&logo=visualstudiocode&logoColor=ffffff)](vscode:mcp/install?%7B%22name%22%3A%22diagrams%22%2C%22type%22%3A%22stdio%22%2C%22command%22%3A%22uvx%22%2C%22args%22%3A%5B%22diagrams-mcp%22%5D%7D)\n\n[![Install MCP Server](https://cursor.com/deeplink/mcp-install-dark.svg)](https://cursor.com/en-US/install-mcp?name=diagrams&config=eyJjb21tYW5kIjoidXZ4IGRpYWdyYW1zLW1jcCJ9)\n\n### Claude Desktop\n\nAdd to your `claude_desktop_config.json`:\n\n**For published package:**\n\n```json\n{\n  \"mcpServers\": {\n    \"diagrams\": {\n      \"command\": \"uvx\",\n      \"args\": [\"diagrams-mcp\"]\n    }\n  }\n}\n```\n\n**For local development:**\n\n```json\n{\n  \"mcpServers\": {\n    \"diagrams:local\": {\n      \"command\": \"uv\",\n      \"args\": [\n        \"--directory\",\n        \"/ABSOLUTE/PATH/TO/diagrams-mcp\",\n        \"run\",\n        \"diagrams-mcp\"\n      ]\n    }\n  }\n}\n```\n\n### Claude Code\n\n**Quick setup (CLI):**\n\nPublished package:\n\n```bash\nclaude mcp add --transport stdio math -- uvx diagrams-mcp\n```\n\n**Team setup (project-level):**\n\nAdd `.mcp.json` to your project root:\n\n```json\n{\n  \"mcpServers\": {\n    \"diagrams\": {\n      \"command\": \"uvx\",\n      \"args\": [\"diagrams-mcp\"]\n    }\n  }\n}\n```\n\n**Verify installation:**\n\n```bash\nclaude mcp list\n```\n\nOr check in IDE: View \u2192 MCP Servers, or use `/mcp` command.\n\n## Try It\n\nOnce installed, try these prompts:\n\n- \"Create an AWS 3-tier web application diagram with Route53, ELB, EC2 instances, and RDS\"\n- \"Generate a Kubernetes microservices architecture with ingress, services, and pods\"\n- \"Build a flowchart for a CI/CD pipeline with decision points\"\n- \"Create a diagram using a custom icon from my company logo URL\"\n- \"Show me all available AWS compute nodes\"\n\nMap to tools: `create_diagram`, `create_diagram_with_custom_icons`, `create_flowchart`, `list_available_nodes`, `validate_diagram_spec`\n\n## Tool Reference\n\nAll tool parameters and descriptions are available in your IDE's autocomplete.\n\n### Diagram Generation (3 tools)\n\n| Tool                               | Description                                                  |\n| ---------------------------------- | ------------------------------------------------------------ |\n| `create_diagram`                   | Full infrastructure/architecture diagrams with all providers |\n| `create_diagram_with_custom_icons` | Diagrams with custom node icons from URLs or local files     |\n| `create_flowchart`                 | Simplified flowchart creation with 24 process shapes         |\n\n### Discovery & Validation (2 tools)\n\n| Tool                    | Description                                                   |\n| ----------------------- | ------------------------------------------------------------- |\n| `list_available_nodes`  | Search 500+ available nodes by provider, category, or keyword |\n| `validate_diagram_spec` | Dry-run validation before generation                          |\n\n## Custom Icons\n\n### Web URL Icons\n\n- HTTPS-only (HTTP rejected)\n- 5MB file size limit\n- 5-second download timeout\n- Image format validation (PNG, JPG)\n- Automatic caching (~/.diagrams_mcp/icon_cache)\n\n### Local File Icons\n\n- Path validation (file must exist)\n- Format validation\n- Sandboxed execution",
  "iconUrl": "https://spjawbfpwezjfmicopsl.supabase.co/storage/v1/object/public/server-icons/4da3e958-a199-4bf8-bdec-b181024904bb.svg",
  "remote": true,
  "deploymentUrl": "https://server.smithery.ai/@apetta/diagrams-mcp",
  "connections": [
    {
      "type": "http",
      "deploymentUrl": "https://server.smithery.ai/@apetta/diagrams-mcp/mcp",
      "configSchema": {
        "type": "object",
        "description": "Schema for the /mcp endpoint configuration"
      }
    }
  ],
  "security": null,
  "tools": [
    {
      "name": "create_diagram",
      "_meta": {
        "_fastmcp": {
          "tags": []
        }
      },
      "annotations": {
        "readOnlyHint": false,
        "idempotentHint": true,
        "destructiveHint": false
      },
      "description": "Generate infrastructure diagrams with 15+ providers (AWS, Azure, GCP, K8s, etc.).\n\nExamples:\nAWS: nodes=[{\"id\":\"r53\",\"provider\":\"aws\",\"category\":\"network\",\"type\":\"Route53\",...}]\nK8s: nodes=[{\"id\":\"ing\",\"provider\":\"k8s\",\"category\":\"network\",\"type\":\"Ingress\",...}]\nClusters: clusters=[{\"name\":\"VPC\",\"node_ids\":[\"elb\",\"ec2\"],\"graph_attr\":{\"bgcolor\":\"#E5F5FD\"}}]\n\n\u26a0\ufe0f CRITICAL: Node types must exist in diagrams library or diagram fails silently (no arrows).\nALWAYS verify first: list_available_nodes(provider=\"aws\", category=\"compute\")\nFor brands (Stripe, Vercel), use create_diagram_with_custom_icons instead.",
      "inputSchema": {
        "type": "object",
        "$defs": {
          "NodeDef": {
            "type": "object",
            "required": [
              "id",
              "provider",
              "category",
              "type",
              "label"
            ],
            "properties": {
              "id": {
                "type": "string",
                "maxLength": 200,
                "minLength": 1,
                "description": "Unique node ID (used in connections)"
              },
              "type": {
                "type": "string",
                "minLength": 1,
                "description": "Node type - MUST match class in diagrams.{provider}.{category}: EC2, RDS, Lambda, etc."
              },
              "label": {
                "type": "string",
                "minLength": 1,
                "description": "Display label"
              },
              "category": {
                "type": "string",
                "minLength": 1,
                "description": "Category - MUST exist for provider: compute, database, network, storage, etc."
              },
              "provider": {
                "type": "string",
                "minLength": 1,
                "description": "Provider - MUST be exact: aws, azure, gcp, k8s, onprem, generic, saas, etc."
              }
            },
            "description": "Definition of a diagram node."
          },
          "ClusterDef": {
            "type": "object",
            "required": [
              "name",
              "node_ids"
            ],
            "properties": {
              "name": {
                "type": "string",
                "minLength": 1,
                "description": "Cluster name"
              },
              "node_ids": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "minItems": 1,
                "description": "Node IDs in this cluster"
              },
              "graph_attr": {
                "anyOf": [
                  {
                    "type": "object",
                    "additionalProperties": true
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "Graphviz attributes (bgcolor, pencolor...)"
              },
              "parent_cluster": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "Parent cluster for nesting"
              }
            },
            "description": "Definition of a cluster (logical grouping of nodes)."
          },
          "ConnectionDef": {
            "type": "object",
            "required": [
              "from_node",
              "to_node"
            ],
            "properties": {
              "color": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "Colour (name or hex, e.g. 'red', '#FF0000')"
              },
              "label": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "Connection label"
              },
              "style": {
                "anyOf": [
                  {
                    "enum": [
                      "solid",
                      "dashed",
                      "dotted",
                      "bold"
                    ],
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "Edge style"
              },
              "to_node": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                ],
                "description": "Target node ID(s)"
              },
              "direction": {
                "enum": [
                  "forward",
                  "reverse",
                  "bidirectional"
                ],
                "type": "string",
                "default": "forward",
                "description": "Direction (forward: >>, reverse: <<, bidirectional: -)"
              },
              "from_node": {
                "type": "string",
                "minLength": 1,
                "description": "Source node ID"
              }
            },
            "description": "Definition of a connection between nodes."
          }
        },
        "required": [
          "name",
          "nodes",
          "connections"
        ],
        "properties": {
          "name": {
            "type": "string",
            "description": "Diagram title"
          },
          "nodes": {
            "type": "array",
            "items": {
              "$ref": "#/$defs/NodeDef"
            },
            "description": "List of nodes to include"
          },
          "clusters": {
            "anyOf": [
              {
                "type": "array",
                "items": {
                  "$ref": "#/$defs/ClusterDef"
                }
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Optional clusters for grouping nodes"
          },
          "autolabel": {
            "type": "boolean",
            "default": false,
            "description": "Auto-prefix nodes with class names"
          },
          "direction": {
            "enum": [
              "LR",
              "RL",
              "TB",
              "BT"
            ],
            "type": "string",
            "default": "LR",
            "description": "Diagram direction (LR=left-right, TB=top-bottom)"
          },
          "edge_attr": {
            "anyOf": [
              {
                "type": "object",
                "additionalProperties": true
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Default edge attributes"
          },
          "node_attr": {
            "anyOf": [
              {
                "type": "object",
                "additionalProperties": true
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Default node attributes"
          },
          "curvestyle": {
            "enum": [
              "ortho",
              "curved"
            ],
            "type": "string",
            "default": "ortho",
            "description": "Edge curve style"
          },
          "graph_attr": {
            "anyOf": [
              {
                "type": "object",
                "additionalProperties": true
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Graphviz graph attributes"
          },
          "output_dir": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Output directory (default: current directory). Auto-created if missing."
          },
          "connections": {
            "type": "array",
            "items": {
              "$ref": "#/$defs/ConnectionDef"
            },
            "description": "List of connections between nodes"
          },
          "output_format": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            ],
            "default": "png",
            "description": "Output format(s): png, pdf, jpg, dot"
          },
          "return_base64": {
            "type": "boolean",
            "default": false,
            "description": "Include base64-encoded images"
          }
        }
      },
      "outputSchema": {
        "type": "object",
        "required": [
          "result"
        ],
        "properties": {
          "result": {
            "type": "string"
          }
        },
        "x-fastmcp-wrap-result": true
      }
    },
    {
      "name": "create_diagram_with_custom_icons",
      "_meta": {
        "_fastmcp": {
          "tags": []
        }
      },
      "annotations": {
        "readOnlyHint": false,
        "idempotentHint": true,
        "destructiveHint": false
      },
      "description": "Create diagrams with custom icons from web URLs or local files.\n\nUSE WHEN: Brand logos (Stripe, Vercel, Supabase, Fly.io) not in diagrams library.\nGitHub avatars work well: https://avatars.githubusercontent.com/u/{org_id}\n\nExamples:\nURL: custom_nodes=[{\"id\":\"stripe\",\"icon_source\":\"url\",\"icon_path\":\"https://avatars.githubusercontent.com/u/856813\"}]\nMixed: nodes=[{...AWS nodes...}], custom_nodes=[{...}], connections=[...]\n\nHTTPS-only for URLs, 5MB limit, PNG/JPG supported. Automatic caching.",
      "inputSchema": {
        "type": "object",
        "$defs": {
          "NodeDef": {
            "type": "object",
            "required": [
              "id",
              "provider",
              "category",
              "type",
              "label"
            ],
            "properties": {
              "id": {
                "type": "string",
                "maxLength": 200,
                "minLength": 1,
                "description": "Unique node ID (used in connections)"
              },
              "type": {
                "type": "string",
                "minLength": 1,
                "description": "Node type - MUST match class in diagrams.{provider}.{category}: EC2, RDS, Lambda, etc."
              },
              "label": {
                "type": "string",
                "minLength": 1,
                "description": "Display label"
              },
              "category": {
                "type": "string",
                "minLength": 1,
                "description": "Category - MUST exist for provider: compute, database, network, storage, etc."
              },
              "provider": {
                "type": "string",
                "minLength": 1,
                "description": "Provider - MUST be exact: aws, azure, gcp, k8s, onprem, generic, saas, etc."
              }
            },
            "description": "Definition of a diagram node."
          },
          "ClusterDef": {
            "type": "object",
            "required": [
              "name",
              "node_ids"
            ],
            "properties": {
              "name": {
                "type": "string",
                "minLength": 1,
                "description": "Cluster name"
              },
              "node_ids": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "minItems": 1,
                "description": "Node IDs in this cluster"
              },
              "graph_attr": {
                "anyOf": [
                  {
                    "type": "object",
                    "additionalProperties": true
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "Graphviz attributes (bgcolor, pencolor...)"
              },
              "parent_cluster": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "Parent cluster for nesting"
              }
            },
            "description": "Definition of a cluster (logical grouping of nodes)."
          },
          "ConnectionDef": {
            "type": "object",
            "required": [
              "from_node",
              "to_node"
            ],
            "properties": {
              "color": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "Colour (name or hex, e.g. 'red', '#FF0000')"
              },
              "label": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "Connection label"
              },
              "style": {
                "anyOf": [
                  {
                    "enum": [
                      "solid",
                      "dashed",
                      "dotted",
                      "bold"
                    ],
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "Edge style"
              },
              "to_node": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                ],
                "description": "Target node ID(s)"
              },
              "direction": {
                "enum": [
                  "forward",
                  "reverse",
                  "bidirectional"
                ],
                "type": "string",
                "default": "forward",
                "description": "Direction (forward: >>, reverse: <<, bidirectional: -)"
              },
              "from_node": {
                "type": "string",
                "minLength": 1,
                "description": "Source node ID"
              }
            },
            "description": "Definition of a connection between nodes."
          },
          "CustomNodeDef": {
            "type": "object",
            "required": [
              "id",
              "label",
              "icon_source",
              "icon_path"
            ],
            "properties": {
              "id": {
                "type": "string",
                "maxLength": 200,
                "minLength": 1,
                "description": "Unique node ID"
              },
              "label": {
                "type": "string",
                "minLength": 1,
                "description": "Display label"
              },
              "icon_path": {
                "type": "string",
                "minLength": 1,
                "description": "HTTPS URL or local file path"
              },
              "cache_icons": {
                "type": "boolean",
                "default": true,
                "description": "Cache downloaded icons"
              },
              "icon_source": {
                "enum": [
                  "url",
                  "local"
                ],
                "type": "string",
                "description": "Icon from web URL or local file"
              }
            },
            "description": "Definition of a custom node with icon from URL or local file."
          }
        },
        "required": [
          "name",
          "custom_nodes",
          "connections"
        ],
        "properties": {
          "name": {
            "type": "string",
            "description": "Diagram title"
          },
          "nodes": {
            "anyOf": [
              {
                "type": "array",
                "items": {
                  "$ref": "#/$defs/NodeDef"
                }
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Optional standard provider nodes to mix with custom"
          },
          "clusters": {
            "anyOf": [
              {
                "type": "array",
                "items": {
                  "$ref": "#/$defs/ClusterDef"
                }
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Optional clusters"
          },
          "direction": {
            "enum": [
              "LR",
              "RL",
              "TB",
              "BT"
            ],
            "type": "string",
            "default": "LR",
            "description": "Layout direction"
          },
          "curvestyle": {
            "enum": [
              "ortho",
              "curved"
            ],
            "type": "string",
            "default": "ortho",
            "description": "Edge style"
          },
          "graph_attr": {
            "anyOf": [
              {
                "type": "object",
                "additionalProperties": true
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Graph attributes"
          },
          "output_dir": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Output directory (default: current directory). Auto-created if missing."
          },
          "connections": {
            "type": "array",
            "items": {
              "$ref": "#/$defs/ConnectionDef"
            },
            "description": "Connections between nodes"
          },
          "custom_nodes": {
            "type": "array",
            "items": {
              "$ref": "#/$defs/CustomNodeDef"
            },
            "description": "Custom nodes with icon URLs/paths"
          },
          "output_format": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            ],
            "default": "png",
            "description": "Output format(s): png, pdf, jpg, dot"
          },
          "return_base64": {
            "type": "boolean",
            "default": false,
            "description": "Return base64 images"
          }
        }
      },
      "outputSchema": {
        "type": "object",
        "required": [
          "result"
        ],
        "properties": {
          "result": {
            "type": "string"
          }
        },
        "x-fastmcp-wrap-result": true
      }
    },
    {
      "name": "list_available_nodes",
      "_meta": {
        "_fastmcp": {
          "tags": []
        }
      },
      "annotations": {
        "readOnlyHint": true,
        "idempotentHint": true,
        "destructiveHint": false
      },
      "description": "Discover 500+ node types across providers.\n\n\u26a0\ufe0f USE THIS FIRST before create_diagram to avoid invalid node errors.\n\nFilters: provider, category, search_term\n\nExamples:\nAWS compute: provider=\"aws\", category=\"compute\" \u2192 EC2, Lambda, ECS, EKS...\nSearch DBs: search_term=\"db\" \u2192 RDS, DynamoDB, SQL across providers",
      "inputSchema": {
        "type": "object",
        "properties": {
          "limit": {
            "type": "integer",
            "default": 100,
            "maximum": 500,
            "minimum": 1,
            "description": "Maximum results to return"
          },
          "category": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Filter by category (compute, database, etc.)"
          },
          "provider": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Filter by provider (aws, azure, gcp, etc.)"
          },
          "search_term": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Search term for node type names"
          }
        }
      },
      "outputSchema": {
        "type": "object",
        "required": [
          "result"
        ],
        "properties": {
          "result": {
            "type": "string"
          }
        },
        "x-fastmcp-wrap-result": true
      }
    },
    {
      "name": "create_flowchart",
      "_meta": {
        "_fastmcp": {
          "tags": []
        }
      },
      "annotations": {
        "readOnlyHint": false,
        "idempotentHint": true,
        "destructiveHint": false
      },
      "description": "Create process flowcharts with 24 shapes (StartEnd, Process, Decision, etc.).\n\nExample:\nsteps=[{\"id\":\"start\",\"shape\":\"StartEnd\",\"label\":\"Start\"},...]\nflows=[{\"from_step\":\"start\",\"to_step\":\"check\"},...]",
      "inputSchema": {
        "type": "object",
        "$defs": {
          "FlowStepDef": {
            "type": "object",
            "required": [
              "id",
              "shape",
              "label"
            ],
            "properties": {
              "id": {
                "type": "string",
                "maxLength": 200,
                "minLength": 1,
                "description": "Unique step ID"
              },
              "label": {
                "type": "string",
                "minLength": 1,
                "description": "Display label"
              },
              "shape": {
                "type": "string",
                "minLength": 1,
                "description": "Shape (StartEnd, Process, Decision, Data...)"
              }
            },
            "description": "Definition of a flowchart step."
          },
          "FlowConnectionDef": {
            "type": "object",
            "required": [
              "from_step",
              "to_step"
            ],
            "properties": {
              "label": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "Label (e.g. 'Yes', 'No')"
              },
              "to_step": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                ],
                "description": "Target step ID(s)"
              },
              "condition": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "Condition description"
              },
              "from_step": {
                "type": "string",
                "minLength": 1,
                "description": "Source step ID"
              }
            },
            "description": "Definition of a flowchart connection."
          }
        },
        "required": [
          "name",
          "steps",
          "flows"
        ],
        "properties": {
          "name": {
            "type": "string",
            "description": "Flowchart title"
          },
          "flows": {
            "type": "array",
            "items": {
              "$ref": "#/$defs/FlowConnectionDef"
            },
            "description": "Connections between steps"
          },
          "steps": {
            "type": "array",
            "items": {
              "$ref": "#/$defs/FlowStepDef"
            },
            "description": "Flowchart steps"
          },
          "direction": {
            "enum": [
              "LR",
              "RL",
              "TB",
              "BT"
            ],
            "type": "string",
            "default": "TB",
            "description": "Layout direction"
          },
          "graph_attr": {
            "anyOf": [
              {
                "type": "object",
                "additionalProperties": true
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Graphviz graph attributes (overrides defaults)"
          },
          "output_dir": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Output directory (default: current directory). Auto-created if missing."
          },
          "output_format": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            ],
            "default": "png",
            "description": "Output format(s): png, pdf, jpg, dot"
          },
          "return_base64": {
            "type": "boolean",
            "default": false,
            "description": "Return base64 images"
          }
        }
      },
      "outputSchema": {
        "type": "object",
        "required": [
          "result"
        ],
        "properties": {
          "result": {
            "type": "string"
          }
        },
        "x-fastmcp-wrap-result": true
      }
    },
    {
      "name": "validate_diagram_spec",
      "_meta": {
        "_fastmcp": {
          "tags": []
        }
      },
      "annotations": {
        "readOnlyHint": true,
        "idempotentHint": true,
        "destructiveHint": false
      },
      "description": "Validate diagram before generation (dry-run).\n\nChecks: node validity, connection references, cluster memberships.\nReturns: {\"valid\": true/false, \"errors\": [...], \"warnings\": [...]}",
      "inputSchema": {
        "type": "object",
        "$defs": {
          "NodeDef": {
            "type": "object",
            "required": [
              "id",
              "provider",
              "category",
              "type",
              "label"
            ],
            "properties": {
              "id": {
                "type": "string",
                "maxLength": 200,
                "minLength": 1,
                "description": "Unique node ID (used in connections)"
              },
              "type": {
                "type": "string",
                "minLength": 1,
                "description": "Node type - MUST match class in diagrams.{provider}.{category}: EC2, RDS, Lambda, etc."
              },
              "label": {
                "type": "string",
                "minLength": 1,
                "description": "Display label"
              },
              "category": {
                "type": "string",
                "minLength": 1,
                "description": "Category - MUST exist for provider: compute, database, network, storage, etc."
              },
              "provider": {
                "type": "string",
                "minLength": 1,
                "description": "Provider - MUST be exact: aws, azure, gcp, k8s, onprem, generic, saas, etc."
              }
            },
            "description": "Definition of a diagram node."
          },
          "ClusterDef": {
            "type": "object",
            "required": [
              "name",
              "node_ids"
            ],
            "properties": {
              "name": {
                "type": "string",
                "minLength": 1,
                "description": "Cluster name"
              },
              "node_ids": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "minItems": 1,
                "description": "Node IDs in this cluster"
              },
              "graph_attr": {
                "anyOf": [
                  {
                    "type": "object",
                    "additionalProperties": true
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "Graphviz attributes (bgcolor, pencolor...)"
              },
              "parent_cluster": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "Parent cluster for nesting"
              }
            },
            "description": "Definition of a cluster (logical grouping of nodes)."
          },
          "ConnectionDef": {
            "type": "object",
            "required": [
              "from_node",
              "to_node"
            ],
            "properties": {
              "color": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "Colour (name or hex, e.g. 'red', '#FF0000')"
              },
              "label": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "Connection label"
              },
              "style": {
                "anyOf": [
                  {
                    "enum": [
                      "solid",
                      "dashed",
                      "dotted",
                      "bold"
                    ],
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "Edge style"
              },
              "to_node": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                ],
                "description": "Target node ID(s)"
              },
              "direction": {
                "enum": [
                  "forward",
                  "reverse",
                  "bidirectional"
                ],
                "type": "string",
                "default": "forward",
                "description": "Direction (forward: >>, reverse: <<, bidirectional: -)"
              },
              "from_node": {
                "type": "string",
                "minLength": 1,
                "description": "Source node ID"
              }
            },
            "description": "Definition of a connection between nodes."
          }
        },
        "required": [
          "nodes",
          "connections"
        ],
        "properties": {
          "nodes": {
            "type": "array",
            "items": {
              "$ref": "#/$defs/NodeDef"
            },
            "description": "Nodes to validate"
          },
          "clusters": {
            "anyOf": [
              {
                "type": "array",
                "items": {
                  "$ref": "#/$defs/ClusterDef"
                }
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Clusters to validate"
          },
          "connections": {
            "type": "array",
            "items": {
              "$ref": "#/$defs/ConnectionDef"
            },
            "description": "Connections to validate"
          }
        }
      },
      "outputSchema": {
        "type": "object",
        "required": [
          "result"
        ],
        "properties": {
          "result": {
            "type": "string"
          }
        },
        "x-fastmcp-wrap-result": true
      }
    }
  ],
  "_sync": {
    "fetched_at": "2026-01-04T13:12:11.921659+00:00",
    "source": "smithery"
  }
}